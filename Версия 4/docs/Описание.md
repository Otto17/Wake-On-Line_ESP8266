Wake-On-Line на ESP-12F ver.4.x

Удалённое отслеживание и управлением состоянием ПК через WEB интерфейс или через приложение RemoteXY (Включается или Выключается из вкладки "a0_Settings" перед компиляцией).

Возможности WEB:

```
Страница "Управление":

  - Проверка состояния ПК (ON/OFF) \[без обновления страницы\];

  - Удалённое Вкл. и Выкл. ПК;

  - Удалённое жёсткое выключение ПК (в случае его зависания);

  - Мониторинг температуры внутри корпуса.

Страница "Настройки":

  - Файловый менеджер;

  - Изменение данных WiFi и Авторизации на WEB;

  - OTA обновление;

  - Перезагрузка ESP;

  - Сброс настроек ESP.

Страница "Информация":

  - Просто некоторая информация о состоянии ESP.
```

Возможности RemoteXY (использован вариант с ОБЛОКОМ):

```
- Интерфейс приложения с пятью элементами (в рамках бесплатной версии);

- Проверка состояния ПК (ON/OFF);

- Удалённое Вкл. и Выкл. ПК;

- Удалённое жёсткое выключение ПК (в случае его зависания);

- Мониторинг температуры внутри корпуса;

- Построение графика темперы в реальном времени.
```

Порядок настройки и подключения:

1. Выставить параметры платы как указано ниже, изменить настройки на вкладке "a0_Settings" (а так же обязательно: Вкл. управление через RemoteXY и задать ему свой токен или Выкл. RemoteXY, если он не нужен) и загрузить скетч.
2. После загрузки скетча ESP перейдёт в режим AP (точка доступа), LED на модуле ESP будет гореть, подключаемся к сети "ESP Config" (пароля нет), вводим SSID/Пароль от WiFi и Логин/Пароль от WEB интерфейса и Сохраняем.

После подключения к WiFi LED на модуле ESP погаснет.

1. Посмотреть на роутере IP адрес, назначенный ESP (можно сразу же на роутере задать привязку статического IP через MAC).
2. Подключаемся через WEB интерфейс (вводим Логин/Пароль для доступа нас страницу) и на вкладке "Настройки" жмём " Загрузить каталог" и загружаем: "gp_data" и "icons",

потом жмём " Загрузить файл" и в корень загружаем файл favicon. Жмём Ctrl+F5 (обновление страницы не обращаясь в кеш).

1. Готово, пользуемся. Если Вкл. RemoteXY, то скачиваем его на смартфон и настраиваем.

ПРОЧЕЕ ОПИСАНИЕ:

Кнопка на ESP (имеет программную защиту от дребезга):

1 клик  - Вкл. и Выкл. ПК;

3 клика - Жёсткое выключение ПК.

Сброс настроек:

Долгое удержание в течении 5 секунд (время настраивается на вкладке "a0_Settings") начнёт быстро мигать LED на модуле ESP, говоря о том, что можно отпускать кнопку.

После отпускания кнопки произойдёт стирание EEPROM, настройки сбросятся и через секунды три ESP перезагрузится.

Переход в режим AP (без сброса настроек):

Выключаем ESP, нажимаем кнопку на ESP модуле и подаём питание - ESP сразу перейдёт в режим AP.

В режиме AP (точка доступа) LED на модуле ESP будет гореть, так же он будет гореть когда сброшены настройки (удобно использовать как индикатор).

Когда время работы портала закончится (время настраивается на вкладке "a0_Settings"), ESP перейдёт в режим STA (станция). Если не были вбиты настройки WiFI, то ESP будет пытаться подключиться к "пустой/несуществующей" сети,

что бы перейти в режим AP, просто перезагружаем ESP (при условии, что настройки WiFi ещё не сохраняли ранее после прошивки).

Температура:

В скетче перед компиляцией на вкладке "a0_Settings" можно Вкл. или Выкл. коррекцию температуры (если датчик BS18B20 врёт по сравнению с эталоном при комнатной температуре),

а так же задать коэффициент уменьшения или увеличения температуры в зависимости в какую сторону нужно подкорректировать значения температуры.

Файловая система (FS):

Пути с нужными файлами и каталогами файловой системе должен выглядеть так:

/favicon.ico          - Это иконка на вкладке страницы

/gp_data/jquery.js    - Это файл с jQuery (обновление элементов страницы без перезагрузки)

/icons/temp.svg       - Это картинка для значка температуры

Файловая система при сбросе настроек НЕ форматируется! Если нужно форматировать при сбросе, то включить это можно на вкладке "a0_Settings".

При Вкл. форматировании FS для включения потребуется чуть больше времени (около 6 сек), следует ориентироваться на LED индикатор на модуле ESP.

Паттерн на WEB

На странице настроек в блоке "Обновление данных" имеется простая проверка на ввод символов.

Для WiFi подключения:

SSID:   разрешён ввод от 1 до 32 символов

Пароль: разрешён ввод от 8 до 32 символов (P.S. в поле пароль есть кнопка с глазом, что бы можно было посмотреть введённый пароль)

Для защиты WEB:

SSID:   разрешён ввод от 2 до 20 символов

Пароль: разрешён ввод от 4 до 20 символов (P.S. в поле пароль есть кнопка с глазом, что бы можно было посмотреть введённый пароль)

P.S. Подправил заголовочный файл "builder.h" из библиотеки "GyverPortal", а именно:

Русифицировал "GP.SYSTEM_INFO()" и добавил вывод даты и времени компиляции скетча, поэтому лучше использовать библиотеку из каталога "libraries".

Параметры платы в Arduino IDE (для ESP8266 8M):

1. Плата "Generic ESP8266 Module"
2. Upload Speed: 921600
3. Flash Size: 8MB (FS:6MB OTA:\~1019KB)
4. Flash Mode: QIO (fast)
5. IwIP Variant: v2 Higher Bandwidth
6. Builtin Led: 2
7. Erase Flash: All Flash Contents

Остальное параметры не трогал, стоят по умолчанию.

Изменения:

Начальный релиз.

Дата создания: 08.03.2023г.

Версия: 4.8

Автор: Otto.